--- ../src-base/minecraft/net/minecraft/block/BlockShulkerBox.java
+++ ../src-work/minecraft/net/minecraft/block/BlockShulkerBox.java
@@ -44,7 +44,7 @@
 public class BlockShulkerBox extends BlockContainer
 {
     public static final PropertyEnum<EnumFacing> FACING = PropertyDirection.create("facing");
-    private final EnumDyeColor color;
+    public final EnumDyeColor color; //Craftbukkit - private -> public
 
     public BlockShulkerBox(EnumDyeColor colorIn)
     {
@@ -160,9 +160,34 @@
         }
     }
 
+    // CraftBukkit start - override to prevent duplication when dropping
     public void dropBlockAsItemWithChance(World worldIn, BlockPos pos, IBlockState state, float chance, int fortune)
     {
+    	//Lava-test - TODO investigate why is this here..
+        /*TileEntity tileentity = worldIn.getTileEntity(pos);
+
+        if (tileentity instanceof TileEntityShulkerBox) {
+            TileEntityShulkerBox tileentityshulkerbox = (TileEntityShulkerBox) tileentity;
+
+            if (!tileentityshulkerbox.isCleared() && tileentityshulkerbox.shouldDrop()) {
+                ItemStack itemstack = new ItemStack(Item.getItemFromBlock(this));
+                NBTTagCompound nbttagcompound = new NBTTagCompound();
+                NBTTagCompound nbttagcompound1 = new NBTTagCompound();
+
+                nbttagcompound.setTag("BlockEntityTag", ((TileEntityShulkerBox) tileentity).saveToNbt(nbttagcompound1));
+                itemstack.setTagCompound(nbttagcompound);
+                if (tileentityshulkerbox.hasCustomName()) {
+                    itemstack.setStackDisplayName(tileentityshulkerbox.getName());
+                    tileentityshulkerbox.setCustomName("");
+                }
+
+                spawnAsEntity(worldIn, pos, itemstack);
+            }
+
+            worldIn.updateComparatorOutputLevel(pos, state.getBlock());
+        }*/
     }
+    // CraftBukkit end
 
     public void onBlockPlacedBy(World worldIn, BlockPos pos, IBlockState state, EntityLivingBase placer, ItemStack stack)
     {
@@ -181,7 +206,7 @@
     {
         TileEntity tileentity = worldIn.getTileEntity(pos);
 
-        if (tileentity instanceof TileEntityShulkerBox)
+        if (tileentity instanceof TileEntityShulkerBox) // CraftBukkit - moved up /// Lava-test - revert back
         {
             TileEntityShulkerBox tileentityshulkerbox = (TileEntityShulkerBox)tileentity;
 
@@ -204,6 +229,7 @@
 
             worldIn.updateComparatorOutputLevel(pos, state.getBlock());
         }
+        //worldIn.updateComparatorOutputLevel(pos, state.getBlock()); // CraftBukkit - moved down /// Lava-test revert back
 
         super.breakBlock(worldIn, pos, state);
     }
