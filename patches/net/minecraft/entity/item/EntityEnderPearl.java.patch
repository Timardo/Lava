--- ../src-base/minecraft/net/minecraft/entity/item/EntityEnderPearl.java
+++ ../src-work/minecraft/net/minecraft/entity/item/EntityEnderPearl.java
@@ -100,23 +100,26 @@
                 {
                     net.minecraftforge.event.entity.living.EnderTeleportEvent event = new net.minecraftforge.event.entity.living.EnderTeleportEvent(entityplayermp, this.posX, this.posY, this.posZ, 5.0F);
                     if (!net.minecraftforge.common.MinecraftForge.EVENT_BUS.post(event))
-                    { // Don't indent to lower patch size
+                    { // Don't indent to lower patch size ///Lava-test - move whole bukkit event logic to EnderTeleportEvent in LavaEventHandler
                     if (this.rand.nextFloat() < 0.05F && this.world.getGameRules().getBoolean("doMobSpawning"))
                     {
                         EntityEndermite entityendermite = new EntityEndermite(this.world);
                         entityendermite.setSpawnedByPlayer(true);
                         entityendermite.setLocationAndAngles(entitylivingbase.posX, entitylivingbase.posY, entitylivingbase.posZ, entitylivingbase.rotationYaw, entitylivingbase.rotationPitch);
-                        this.world.spawnEntity(entityendermite);
+                        //Craftbukkit start - add spawn reason
+                        //this.world.spawnEntity(entityendermite);
+                        this.world.spawnEntity(entityendermite, org.bukkit.event.entity.CreatureSpawnEvent.SpawnReason.ENDER_PEARL);
+                        //Craftbukkit end
                     }
-
                     if (entitylivingbase.isRiding())
                     {
                         entitylivingbase.dismountRidingEntity();
                     }
-
                     entitylivingbase.setPositionAndUpdate(event.getTargetX(), event.getTargetY(), event.getTargetZ());
                     entitylivingbase.fallDistance = 0.0F;
+                    org.bukkit.craftbukkit.event.CraftEventFactory.entityDamage = this; //Craftbukkit - used in event
                     entitylivingbase.attackEntityFrom(DamageSource.FALL, event.getAttackDamage());
+                    org.bukkit.craftbukkit.event.CraftEventFactory.entityDamage = null; //Craftbukkit - used in event
                     }
                 }
             }
