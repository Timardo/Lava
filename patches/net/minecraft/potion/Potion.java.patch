--- ../src-base/minecraft/net/minecraft/potion/Potion.java
+++ ../src-work/minecraft/net/minecraft/potion/Potion.java
@@ -30,7 +30,7 @@
     private final int liquidColor;
     private String name = "";
     private int statusIconIndex = -1;
-    private double effectiveness;
+    public double effectiveness; //Craftbukkit - private -> public
     private boolean beneficial;
 
     @Nullable
@@ -78,14 +78,14 @@
         {
             if (entityLivingBaseIn.getHealth() < entityLivingBaseIn.getMaxHealth())
             {
-                entityLivingBaseIn.heal(1.0F);
+                entityLivingBaseIn.heal(1.0F, org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.MAGIC_REGEN); //Craftbukkit - add regain reason
             }
         }
         else if (this == MobEffects.POISON)
         {
             if (entityLivingBaseIn.getHealth() > 1.0F)
             {
-                entityLivingBaseIn.attackEntityFrom(DamageSource.MAGIC, 1.0F);
+                entityLivingBaseIn.attackEntityFrom(org.bukkit.craftbukkit.event.CraftEventFactory.POISON, 1.0F); // CraftBukkit - DamageSource.MAGIC -> CraftEventFactory.POISON TODO damaging stuff
             }
         }
         else if (this == MobEffects.WITHER)
@@ -100,7 +100,17 @@
         {
             if (!entityLivingBaseIn.world.isRemote)
             {
+                /* Craftbukkit start - FoodLevelChangeEvent TODO check this and rework to correctly support AppleCore
                 ((EntityPlayer)entityLivingBaseIn).getFoodStats().addStats(amplifier + 1, 1.0F);
+                 */
+                EntityPlayer entityhuman = (EntityPlayer) entityLivingBaseIn;
+                int oldFoodLevel = entityhuman.getFoodStats().foodLevel;
+                org.bukkit.event.entity.FoodLevelChangeEvent event = org.bukkit.craftbukkit.event.CraftEventFactory.callFoodLevelChangeEvent(entityhuman, amplifier + 1 + oldFoodLevel);
+
+                if (!event.isCancelled()) entityhuman.getFoodStats().addStats(event.getFoodLevel() - oldFoodLevel, 1.0F);
+
+                ((net.minecraft.entity.player.EntityPlayerMP) entityhuman).connection.sendPacket(new net.minecraft.network.play.server.SPacketUpdateHealth(((net.minecraft.entity.player.EntityPlayerMP) entityhuman).getBukkitEntity().getScaledHealth(), entityhuman.getFoodStats().foodLevel, entityhuman.getFoodStats().foodSaturationLevel));
+                // CraftBukkit end
             }
         }
         else if ((this != MobEffects.INSTANT_HEALTH || entityLivingBaseIn.isEntityUndead()) && (this != MobEffects.INSTANT_DAMAGE || !entityLivingBaseIn.isEntityUndead()))
@@ -112,7 +122,7 @@
         }
         else
         {
-            entityLivingBaseIn.heal((float)Math.max(4 << amplifier, 0));
+            entityLivingBaseIn.heal((float)Math.max(4 << amplifier, 0), org.bukkit.event.entity.EntityRegainHealthEvent.RegainReason.MAGIC); //Craftbukkit - add regain reason TODO rework all this reasons
         }
     }
 
