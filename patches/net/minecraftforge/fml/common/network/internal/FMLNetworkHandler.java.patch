--- ../src-base/minecraft/net/minecraftforge/fml/common/network/internal/FMLNetworkHandler.java
+++ ../src-work/minecraft/net/minecraftforge/fml/common/network/internal/FMLNetworkHandler.java
@@ -88,6 +88,20 @@
             Container remoteGuiContainer = NetworkRegistry.INSTANCE.getRemoteGuiContainer(mc, entityPlayerMP, modGuiId, world, x, y, z);
             if (remoteGuiContainer != null)
             {
+                // Lava start
+                if (remoteGuiContainer.getBukkitView() == null) {
+                    net.minecraft.tileentity.TileEntity te = entityPlayer.world.getTileEntity(new net.minecraft.util.math.BlockPos(x, y, z));
+                    if (te instanceof net.minecraft.inventory.IInventory) {
+                        remoteGuiContainer.setBukkitView(new org.bukkit.craftbukkit.inventory.CraftInventoryView(entityPlayer.getBukkitEntity(), new org.bukkit.craftbukkit.inventory.CraftInventory((net.minecraft.inventory.IInventory) te), remoteGuiContainer));
+                    } else {
+                        remoteGuiContainer.setBukkitView(new org.bukkit.craftbukkit.inventory.CraftInventoryView(entityPlayer.getBukkitEntity(), org.bukkit.Bukkit.createInventory(entityPlayer.getBukkitEntity(), org.bukkit.event.inventory.InventoryType.CHEST), remoteGuiContainer));
+                    }
+                    remoteGuiContainer = org.bukkit.craftbukkit.event.CraftEventFactory.callInventoryOpenEvent((EntityPlayerMP) entityPlayer, remoteGuiContainer, false);
+                    if (remoteGuiContainer == null) {
+                        return;
+                    }
+                }
+                //Lava end
                 entityPlayerMP.getNextWindowId();
                 entityPlayerMP.closeContainer();
                 int windowId = entityPlayerMP.currentWindowId;
@@ -210,7 +224,10 @@
     public static void enhanceStatusQuery(JsonObject jsonobject)
     {
         JsonObject fmlData = new JsonObject();
-        fmlData.addProperty("type", "FML");
+        //Lava start
+        //fmlData.addProperty("type", "FML");
+        fmlData.addProperty("type", "BUKKIT"); // Show bukkit icon in server list TODO show lava icon?
+        //Lava end
         JsonArray modList = new JsonArray();
         for (ModContainer mc : Loader.instance().getActiveModList())
         {
